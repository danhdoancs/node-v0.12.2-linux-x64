var http = require('http')
var url = require('url')
var time = require('strftime')

var server = http.createServer(function(req,res){
    var parser = url.parse(req.url, true)
    var iso = parser.query.iso
    if(iso == null)
    res.end('201')

    var date = new Date(iso)

    res.writeHead(200, {'Content-Type': 'application/json'})
    if(parser.pathname === '/api/parsetime')
{

    var result = {'hour':date.getHours(),'minute':date.getMinutes(), 'second':date.getSeconds()}
    res.end(JSON.stringify(result))
}
else if(parser.pathname === '/api/unixtime')
{
    var result = {'unixtime':date.getTime()}
    res.end(JSON.stringify(result))
}
else
res.writeHead(404)
})
server.listen(process.argv[2])
